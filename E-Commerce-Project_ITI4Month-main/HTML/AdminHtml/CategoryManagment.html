<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Category Management</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@400&display=swap"
        rel="stylesheet" />

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
        }

        .material-symbols-outlined {
            vertical-align: middle;
            font-size: 20px;
        }

        .card {
            border-radius: 0.5rem;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        }
    </style>
</head>

<body>

    <main class="container py-5">

        <!-- Header -->
        <div class="row align-items-center mb-4">
            <div class="col">
                <h1 class="h3 fw-bold mb-1">Category Management</h1>
                <p class="text-muted mb-0">Create, view, update, and delete your product taxonomy</p>
            </div>
            <div class="col-auto">
                <button class="btn btn-primary d-flex align-items-center gap-2" id="addCategoryBtn">
                    <span class="material-symbols-outlined">add</span>
                    Add New Category
                </button>
            </div>
        </div>

        <!-- Table -->
        <div class="card mb-5">
            <div class="table-responsive">
                <table class="table table-hover mb-0 align-middle">
                    <thead class="table-light">
                        <tr>
                            <th>ID</th>
                            <th>Category Name</th>
                            <th>Description</th>
                            <th class="text-end">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="categoryTable">
                        <tr>
                            <td>#101</td>
                            <td>Electronics</td>
                            <td>Gadgets and tech devices</td>
                            <td class="text-end">
                                <button class="btn btn-outline-primary btn-sm me-1 edit-btn">
                                    <span class="material-symbols-outlined">edit</span>
                                </button>
                                <button class="btn btn-outline-danger btn-sm delete-btn">
                                    <span class="material-symbols-outlined">delete</span>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Add / Edit Form -->
        <div class="card d-none" id="categoryForm">
            <div class="card-header bg-white">
                <h5 class="fw-bold mb-0">Add / Edit Category</h5>
            </div>
            <div class="card-body">
                <div class="row g-4">
                    <div class="col-md-6">
                        <label class="form-label">Category Name</label>
                        <input type="text" class="form-control" id="categoryName">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Icon</label>
                        <select class="form-select">
                            <option>Select icon</option>
                            <option>Devices</option>
                            <option>Book</option>
                            <option>Kitchen</option>
                        </select>
                    </div>
                    <div class="col-12">
                        <label class="form-label">Description</label>
                        <textarea class="form-control" rows="4"
                            id="categoryDescription"></textarea>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-light d-flex justify-content-end gap-2">
                <button class="btn btn-secondary" id="cancelBtn">Cancel</button>
                <button class="btn btn-primary" id="saveBtn">Save</button>
            </div>
        </div>

    </main>

    <!-- Toasts -->
    <div class="position-fixed bottom-0 end-0 p-4" style="z-index: 1055">

        <!-- Save Toast -->
        <div id="successToast" class="toast text-bg-dark mb-2" role="alert">
            <div class="d-flex">
                <div class="toast-body d-flex align-items-center gap-2">
                    <span class="material-symbols-outlined text-success">check_circle</span>
                    Category saved successfully
                </div>
                <button class="btn-close btn-close-white me-2 m-auto"
                    data-bs-dismiss="toast"></button>
            </div>
        </div>

        <!-- Cancel Toast -->
        <div id="cancelToast" class="toast text-bg-secondary" role="alert">
            <div class="d-flex">
                <div class="toast-body d-flex align-items-center gap-2">
                    <span class="material-symbols-outlined text-warning">info</span>
                    Action cancelled
                </div>
                <button class="btn-close btn-close-white me-2 m-auto"
                    data-bs-dismiss="toast"></button>
            </div>
        </div>

    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- JavaScript -->
    <script>
        const addBtn = document.getElementById("addCategoryBtn");
        const formCard = document.getElementById("categoryForm");
        const nameInput = document.getElementById("categoryName");
        const descInput = document.getElementById("categoryDescription");
        const cancelBtn = document.getElementById("cancelBtn");
        const saveBtn = document.getElementById("saveBtn");
        const tableBody = document.getElementById("categoryTable");

        let idCounter = 101;

        // Add
        addBtn.onclick = () => {
            nameInput.value = "";
            descInput.value = "";
            formCard.classList.remove("d-none");
            window.scrollTo({ top: formCard.offsetTop, behavior: "smooth" });
        };

        // Edit & Delete
        document.addEventListener("click", function (e) {

            if (e.target.closest(".edit-btn")) {
                const row = e.target.closest("tr");
                nameInput.value = row.children[1].innerText;
                descInput.value = row.children[2].innerText;
                formCard.classList.remove("d-none");
            }

            if (e.target.closest(".delete-btn")) {
                if (confirm("Are you sure?")) {
                    e.target.closest("tr").remove();
                }
            }
        });

        // Save
        saveBtn.onclick = () => {
            if (nameInput.value.trim() === "") {
                alert("Category name is required");
                return;
            }

            idCounter++;

            const row = `
            <tr>
                <td>#${idCounter}</td>
                <td>${nameInput.value}</td>
                <td>${descInput.value}</td>
                <td class="text-end">
                    <button class="btn btn-outline-primary btn-sm me-1 edit-btn">
                        <span class="material-symbols-outlined">edit</span>
                    </button>
                    <button class="btn btn-outline-danger btn-sm delete-btn">
                        <span class="material-symbols-outlined">delete</span>
                    </button>
                </td>
            </tr>
            `;

            tableBody.insertAdjacentHTML("beforeend", row);
            formCard.classList.add("d-none");

            new bootstrap.Toast(document.getElementById("successToast")).show();
        };

        // Cancel
        cancelBtn.onclick = () => {
            formCard.classList.add("d-none");
            new bootstrap.Toast(document.getElementById("cancelToast")).show();
        };
    </script>

</body>

</html>
